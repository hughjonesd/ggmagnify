---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
knitr::read_chunk("man/R/advanced-example.R", labels = "example-advanced")
knitr::read_chunk("man/R/map-example.R", labels = "example-map")
```

# ggmagnify

<!-- badges: start -->
[![R-CMD-check](https://github.com/hughjonesd/ggmagnify/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/hughjonesd/ggmagnify/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

ggmagnify creates a magnified inset of part of a
[ggplot](https://ggplot2.tidyverse.org/) object. Borders can be drawn around the
target area and the inset, along with projection lines from one to the other. If
the `ggfx` package is installed, the inset can have a drop shadow.

You can install the development version of ggmagnify from [GitHub](https://github.com/) with:

``` r
# install.packages("remotes")
remotes::install_github("hughjonesd/ggmagnify")
```

## Basic inset


```{r example-basic}
library(ggplot2)
library(ggmagnify)

ggp <- ggplot(diamonds, aes(carat, depth, color = cut)) + geom_point()

ggmagnify(ggp,
          xlim = c(1.5, 2.5), ylim = c(60, 65),
          inset_xlim = c(2, 5), inset_ylim = c(40, 55))
```


## Positioning

```{r example-position}

ggmagnify(ggp,
          xlim = c(1.5, 2.5), ylim = c(60, 65),
          inset_xlim = c(3.5, 5), inset_ylim = c(45, 70))
```


## Colours and lines

```{r example-colours}

ggmagnify(ggp,
          xlim = c(1.5, 2.5), ylim = c(60, 65),
          inset_xlim = c(2, 5), inset_ylim = c(40, 55), 
          proj = "single",
          colour = "red", proj_linetype = 1, linewidth = 0.8)
```


## Axes

```{r example-axes}

ggmagnify(ggp,
          xlim = c(1.5, 2.5), ylim = c(60, 65),
          inset_xlim = c(2, 5), inset_ylim = c(40, 55), 
          axes = TRUE, border = FALSE)
```


## Inset with shadow

```{r example-shadow}

library(ggfx)

ggmagnify(ggp,
          xlim = c(1.5, 2.5), ylim = c(60, 65),
          inset_xlim = c(2, 5), inset_ylim = c(40, 55), shadow = TRUE)
```


## Inset outside the plot region

```{r example-noclip}

ggp_noclip <- ggp + 
              coord_cartesian(xlim = c(0, 5), ylim = c(40, 80), clip = "off") +
              theme(legend.justification = c(0, 1))

ggmagnify(ggp_noclip,
          xlim = c(1.5, 2.5), ylim = c(60, 65),
          inset_xlim = c(2.6, 6), inset_ylim = c(40, 55),
          shadow = TRUE)
```

## Maps (experimental)

I mean, it's all experimental, but maps are *really* experimental.

```{r example-map}
```

## Advanced usage: adding layers to the inset, original plot, or both

```{r example-advanced}
```

## Advanced usage: multiple insets

Use compose to add multiple GgMagnify objects to the original plot in turn:
```{r example-multiple}
ggp <- ggplot(iris, aes(Sepal.Width, Sepal.Length, color = Species)) + 
       geom_point()

ggm1 <- ggmagnify(ggp, 
                  xlim = c(3.5, 4), ylim = c(5, 5.5),
                  inset_xlim = c(4, 5), inset_ylim = c(7, 8),
                  shadow = TRUE) 

ggm2 <- ggmagnify(ggp, 
                  xlim = c(3, 3.5), ylim = c(6.5, 7.5),
                  inset_xlim = c(2.2, 3.2), inset_ylim = c(4.2, 6.2),
                  shadow = TRUE)

ggp <- compose( ggm1, ggp)
ggp <- compose( ggm2, ggp)
ggp

```
